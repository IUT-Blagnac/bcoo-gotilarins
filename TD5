@startuml

autonumber
hide footbox
participant Cli as "Client"
participant Cser as "Caissier"
participant Cse as "Caisse"
participant Tap as "Tapis"
participant Art as "a:Article"
participant Banq as "Banque"
participant Imp as "Imprimante"

Cli -> Cser : arriver
activate Cser
Cli -> Tap : deposerArticles
activate Tap

loop "Pour chaque article a"
  Cser -> Tapis : prendreArticle
  Cser -> Cse : scan(a)
  activate Cse
  Cse --> Art : getPrix(a)
  Cse --> Art : getLibellé(a)

  opt "Quantité > 1"
    Cser --> Cse : saisir(Qté)
  end
Cse --> Cli : prix et libelé
Cse --> Cser : prix et libelé
end

Cser -> Cse : fin

Cse --> Cli : montant total
Cse --> Cser : montant total
Cser --> Cli : annonce montant total
opt "Paiement en Liquide"
  Cli --> Cser : payer
  Cser --> Cli : encaisser
  Cse --> Cser : afficher montant à rendre
  Cser --> Cli : rendre la monnaie
end
opt "Paiement par Chèque"
  Cser --> Cli : saisie num carte ID
  Cli --> Cser : payer
end
opt "Paiement par Carte de crédit"
  Cse --> Banq : demande autorisation
  opt "Solde sufisant"
    Banq --> Cse : autorisation paiement
    Cli --> Cser : payer
  end
end
Cse --> Cse : enregistrer vente
Cse --> Imp : Imprimer
Cser -> Imp : Prendre le ticket
Cser --> Cli : donner le ticket


@enduml
